(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["Brand"],{"07f9":function(t,n,r){},"28d1":function(t,n,r){},"37c1":function(t,n,r){},"3f5c":function(t,n,r){"use strict";var i=function(){var t=this,n=t.$createElement,r=t._self._c||n;return r("div",[r("div",{class:{shadow:t.shadow,popup:!1},attrs:{id:"holder"},on:{mouseenter:function(n){t.shadow=!0},mouseleave:function(n){t.shadow=!1}}},[r("b-overlay",{attrs:{show:t.busy,opacity:"0.7","spinner-large":"","spinner-variant":"primary"},on:{hidden:t.onHidden}},[r("span",{on:{click:t.clicking}},[r("b-card",{attrs:{"img-src":t.imgSrc,"img-width":"250px","img-height":"200px","img-alt":t.product.name,"img-top":""}},[r("b-card-text",{staticStyle:{padding:"0 5%"}},[r("div",{staticClass:"text-truncate"},[t._v(" "+t._s(t.product.name)+" ")]),r("b-form-rating",{staticStyle:{transform:"scale(0.8, 0.8)",padding:"0",margin:"0"},attrs:{inline:"","no-border":"",variant:"warning",readonly:"",size:"sm",precision:"1"},model:{value:t.product.rating,callback:function(n){t.$set(t.product,"rating",n)},expression:"product.rating"}}),r("div",[t.product.discount>0?r("span",[r("span",{staticClass:"strike",attrs:{id:"prev-price"}},[t._v("৳"+t._s(t.prevPrice))]),r("sup",{attrs:{id:"discount"}},[t._v("-"+t._s(t.product.discount)+"%")])]):t._e(),r("span",{attrs:{id:"cur-price"}},[t._v(" ৳"+t._s(t.product.curPrice))])])],1)],1)],1)]),r("b-button",{style:{opacity:1*t.shadow},attrs:{id:"add-to-cart","aria-controls":"sidebar-right-footer"+t.product.id,"aria-expanded":t.show},on:{click:function(n){return t.initialHandler(!0)}}},[t._v(" Add to Cart ")]),r("b-button",{style:{opacity:1*t.shadow},attrs:{id:"buy-now","aria-controls":"sidebar-right-footer-buy"+t.product.id,"aria-expanded":""},on:{click:function(n){return t.initialHandler(!1)}}},[t._v(" Buy Now ")])],1),r("b-sidebar",{attrs:{id:"sidebar-right-footer"+t.product.id,"aria-label":"Sidebar with custom footer",shadow:"",lazy:""},scopedSlots:t._u([{key:"footer",fn:function(){return[r("div",{staticClass:"mx-auto text-center"},[r("b-button",{staticClass:"col-6",attrs:{squared:"",variant:"warning"},on:{click:t.doReset}},[t._v("Reset")]),r("b-button",{staticClass:"col-6",attrs:{squared:"",variant:"success",disabled:!t.allSelected},on:{click:t.finalHandler}},[t._v(" "+t._s(t.cartButtonPressed?"Add to Cart":"Check Out")+" ")])],1)]},proxy:!0}]),model:{value:t.show,callback:function(n){t.show=n},expression:"show"}},[r("b-overlay",{staticStyle:{height:"500px"},attrs:{show:!t.productLoaded,opacity:"0.4",rounded:"sm"},scopedSlots:t._u([{key:"overlay",fn:function(){return[r("div",{staticClass:"text-center"},[r("b-icon",{attrs:{icon:"stopwatch","font-scale":"3",animation:"cylon"}}),r("p",{attrs:{id:"cancel-label"}},[t._v("Please wait...")])],1)]},proxy:!0}])},[t.productLoaded?r("div",{staticClass:"mx-auto d-flex flex-column"},[r("b-list-group",[t._l(t.productFull.specifications,(function(n,i,o){return r("span",{key:o},[Array.isArray(n)?r("b-list-group-item",[r("b-form-group",{attrs:{label:i}},[r("b-form-select",{staticStyle:{width:"70%"},attrs:{options:n,"value-field":i},scopedSlots:t._u([{key:"first",fn:function(){return[r("b-form-select-option",{attrs:{value:null,disabled:""}},[t._v("-- Please select an option --")])]},proxy:!0}],null,!0),model:{value:t.selector[i],callback:function(n){t.$set(t.selector,i,n)},expression:"selector[key]"}})],1)],1):t._e()],1)})),r("b-list-group-item",[r("label",{attrs:{for:"sb-inline"+t.product.id}},[t._v("Quantity")]),r("b-form-spinbutton",{staticClass:"ml-2",attrs:{id:"sb-inline"+t.product.id,inline:""},model:{value:t.quantity,callback:function(n){t.quantity=n},expression:"quantity"}})],1)],2)],1):t._e()])],1)],1)},o=[],a=(r("b0c0"),r("9911"),r("5530")),e=r("2f62"),s=r("9c03"),c={props:["product"],data:function(){return{busy:!1,shadow:!1,productFull:{},productLoaded:!1,selector:{},show:!1,cartButtonPressed:null,quantity:1}},computed:Object(a["a"])(Object(a["a"])({},Object(e["c"])(["authToken"])),{},{allSelected:function(){if(!this.productLoaded)return!1;for(var t in this.selector)if(this.selector.hasOwnProperty(t)&&Array.isArray(this.productFull.specifications[t])&&null===this.selector[t])return!1;return!0},imgSrc:function(){return this.product.image?this.product.image.link:""},prevPrice:function(){return Math.round(this.product.curPrice/(1-this.product.discount/100))}}),mixins:[s["a"]],methods:Object(a["a"])(Object(a["a"])({},Object(e["b"])(["addToCart"])),{},{loadProduct:function(){var t=this;if(!this.productLoaded){var n=this.product.id;this.loader("/product",{productID:n},"specs of product-".concat(n)).then((function(n){t.productFull=n.data,t.productFull.specifications=t.productFull.extra,delete t.productFull.extra,t.productLoaded=!0,t.loadSelector()}))}},loadSelector:function(){for(var t in this.selector=JSON.parse(JSON.stringify(this.productFull.specifications)),this.selector)this.selector.hasOwnProperty(t)&&Array.isArray(this.productFull.specifications[t])&&this.$set(this.selector,t,null);console.log("done")},makeOrder:function(){var t=this.productFull.price.sellingPrice;return{products:[{id:this.productFull.productID,name:this.productFull.name,specifications:this.selector,quantity:this.quantity,image:this.productFull.images[0],curPrice:t,discount:this.productFull.price.discount,vat:this.productFull.price.vat}],subTotal:t*(1+this.productFull.price.vat/100)*this.quantity,deliveryCharge:60}},initialHandler:function(t){this.authToken||t?(this.loadProduct(),this.show=!0,this.cartButtonPressed=t):this.$bvModal.show("login-modal")},finalHandler:function(){this.allSelected&&(this.cartButtonPressed?this.addToCart([{productID:this.productFull.productID,specifications:this.selector,quantity:this.quantity,curPrice:this.product.curPrice,discount:this.product.discount,image:this.product.image,name:this.product.name,vat:this.productFull.price.vat}]).then().catch((function(t){console.log(t.response)})):this.$router.push({name:"OrderSubmitDetails",query:{order:this.makeOrder()}}),this.show=!1)},doReset:function(){for(var t in this.selector)this.selector.hasOwnProperty(t)&&Array.isArray(this.productFull.specifications[t])&&this.$set(this.selector,t,null)},onHidden:function(){this.$refs.button.focus()},clicking:function(){this.busy=!0,this.$router.push({name:"CertainProduct",params:{id:this.product.id}})}})},d=c,u=(r("e92c"),r("2877")),l=Object(u["a"])(d,i,o,!1,null,"561ff584",null);n["a"]=l.exports},"49cf":function(t,n,r){"use strict";var i=r("adfb"),o=r.n(i);o.a},5214:function(t,n,r){"use strict";var i=r("07f9"),o=r.n(i);o.a},"7a81":function(t,n,r){"use strict";r.r(n);var i=function(){var t=this,n=t.$createElement,r=t._self._c||n;return r("b-container",{staticClass:"main",attrs:{fluid:!0}},[r("b-carousel",{staticClass:"mb-4",staticStyle:{"text-shadow":"1px 1px 2px #333"},attrs:{id:"carousel-1",interval:4e3,controls:"",indicators:"","img-width":"200","img-height":"200",background:"gray"},on:{"sliding-start":t.onSlideStart,"sliding-end":t.onSlideEnd}},[r("b-carousel-slide",{scopedSlots:t._u([{key:"img",fn:function(){return[r("img",{staticClass:"d-block w-100",attrs:{width:"200",height:"300","background-color":"red",src:t.imgSrc}})]},proxy:!0}])})],1),r("b-row",t._l(t.products,(function(t){return r("b-col",{key:t.id,attrs:{cols:"6",sm:"4",md:"3",lg:"2"}},[r("product-box",{attrs:{product:t}})],1)})),1),r("hr"),r("b-container",{staticClass:"d-flex justify-content-center",attrs:{fluid:""}},[r("b-overlay",{staticClass:"d-inline block",attrs:{show:t.busy,opacity:"0.4","spinner-small":"","spinner-variant":"primary"}},[t.productLoadingDone?t._e():r("b-button",{attrs:{disabled:t.busy,variant:"success"},on:{click:function(n){return t.loadProducts(t.brand.name)}}},[t._v(" Load More Products ")])],1)],1)],1)},o=[],a=(r("99af"),r("b0c0"),r("9911"),r("3f5c")),e=r("9c03"),s={name:"CertainBrand",data:function(){return{brand:{},products:[],productLoadingDone:!1,sliding:null,busy:!1}},computed:{imgSrc:function(){return this.brand.image?this.brand.image.link:""}},components:{ProductBox:a["a"]},mixins:[e["a"]],methods:{onSlideStart:function(t){this.sliding=!0},onSlideEnd:function(t){this.sliding=!1},loadBrand:function(t){var n=this;this.loader("/brand",{name:t},"brand ".concat(t)).then((function(t){n.brand=t.data,console.log("done"+t.data)}))},loadProducts:function(t){var n=this;this.productLoadingDone||(this.busy=!0);var r=this.products.length,i="5";this.loader("/products/brand",{name:t,offset:r,limit:i},"products of ".concat(t)).then((function(t){n.busy=!1,n.products=n.products.concat(t.data.products),t.data.products.length<i?n.productLoadingDone=!0:n.productLoadingDone=!1}))},clearProducts:function(){this.products=[],this.productLoadingDone=!1},loadAll:function(t){this.loadBrand(t),this.clearProducts(),this.loadProducts(t)}},watch:{$route:function(t,n){this.loadAll(t.query.name)}},created:function(){this.loadAll(this.$route.query.name)}},c=s,d=(r("49cf"),r("2877")),u=Object(d["a"])(c,i,o,!1,null,"96094580",null);n["default"]=u.exports},"857a":function(t,n,r){var i=r("1d80"),o=/"/g;t.exports=function(t,n,r,a){var e=String(i(t)),s="<"+n;return""!==r&&(s+=" "+r+'="'+String(a).replace(o,"&quot;")+'"'),s+">"+e+"</"+n+">"}},9911:function(t,n,r){"use strict";var i=r("23e7"),o=r("857a"),a=r("af03");i({target:"String",proto:!0,forced:a("link")},{link:function(t){return o(this,"a","href",t)}})},"9c03":function(t,n,r){"use strict";r("d3b7");var i=r("be3b"),o={methods:{loader:function(t,n,r){return new Promise((function(o,a){i["a"].get(t,{params:n}).then((function(t){console.log("".concat(r," loaded")),console.log(t),o(t)})).catch((function(t){console.log("".concat(r," loading failed")),console.log(t.response)}))}))}}};n["a"]=o},adfb:function(t,n,r){},af03:function(t,n,r){var i=r("d039");t.exports=function(t){return i((function(){var n=""[t]('"');return n!==n.toLowerCase()||n.split('"').length>3}))}},b20a:function(t,n,r){"use strict";r.r(n);var i=function(){var t=this,n=t.$createElement,r=t._self._c||n;return r("b-container",{staticClass:"main",attrs:{fluid:!0}},[r("b-row",t._l(t.brands,(function(t){return r("b-col",{key:t.name,attrs:{lg:"2",md:"3",sm:"4",cols:"6"}},[r("brand-box",{attrs:{brand:t}})],1)})),1),t.brandLoadingDone?t._e():r("b-button",{on:{click:t.loadBrands}},[t._v(" Load More ")])],1)},o=[],a=(r("99af"),function(){var t=this,n=t.$createElement,r=t._self._c||n;return r("b-overlay",{staticClass:"d-inline block",attrs:{show:t.busy,opacity:"0.4","spinner-small":"","spinner-variant":"primary"},on:{hidden:t.onHidden}},[r("router-link",{attrs:{id:"holder",tag:"div",to:{name:"CertainBrand",query:{name:t.brand.name}}},on:{click:function(n){t.show=!0}}},[r("b-card",{attrs:{title:t.brand.name,"img-src":t.imgSrc,"img-alt":t.brand.name,"img-top":""}},[r("b-card-text",[r("div",{attrs:{id:"discount"}},[t._v(t._s(t.brand.discount)+"%")])])],1)],1)],1)}),e=[],s=(r("9911"),{name:"BrandBox",data:function(){return{busy:!1}},props:["brand"],computed:{imgSrc:function(){return this.brand.image?this.brand.image.link:""}},methods:{onHidden:function(){this.$refs.button.focus()}}}),c=s,d=(r("f5df9"),r("2877")),u=Object(d["a"])(c,a,e,!1,null,"3b798cd8",null),l=u.exports,p=r("9c03"),h={name:"AllBrands",data:function(){return{brands:[],brandLoadingDone:!1}},components:{BrandBox:l},mixins:[p["a"]],methods:{loadBrands:function(){var t=this,n=this.brands.length,r="5";this.loader("/brands/all",{offset:n,limit:r},"brands").then((function(n){t.brands=t.brands.concat(n.data.brands),n.data.brands.length<r&&(t.brandLoadingDone=!0)}))}},created:function(){this.loadBrands()}},f=h,b=(r("5214"),Object(d["a"])(f,i,o,!1,null,"201cf722",null));n["default"]=b.exports},e92c:function(t,n,r){"use strict";var i=r("28d1"),o=r.n(i);o.a},f5df9:function(t,n,r){"use strict";var i=r("37c1"),o=r.n(i);o.a}}]);
//# sourceMappingURL=Brand.619a4bf1.js.map