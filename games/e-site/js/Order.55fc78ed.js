(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["Order"],{"13d5":function(t,e,r){"use strict";var s=r("23e7"),a=r("d58f").left,o=r("a640"),n=r("ae40"),i=o("reduce"),c=n("reduce",{1:0});s({target:"Array",proto:!0,forced:!i||!c},{reduce:function(t){return a(this,t,arguments.length,arguments.length>1?arguments[1]:void 0)}})},2532:function(t,e,r){"use strict";var s=r("23e7"),a=r("5a34"),o=r("1d80"),n=r("ab13");s({target:"String",proto:!0,forced:!n("includes")},{includes:function(t){return!!~String(o(this)).indexOf(a(t),arguments.length>1?arguments[1]:void 0)}})},"44e7":function(t,e,r){var s=r("861d"),a=r("c6b6"),o=r("b622"),n=o("match");t.exports=function(t){var e;return s(t)&&(void 0!==(e=t[n])?!!e:"RegExp"==a(t))}},"5a34":function(t,e,r){var s=r("44e7");t.exports=function(t){if(s(t))throw TypeError("The method doesn't accept regular expressions");return t}},7156:function(t,e,r){var s=r("861d"),a=r("d2bb");t.exports=function(t,e,r){var o,n;return a&&"function"==typeof(o=e.constructor)&&o!==r&&s(n=o.prototype)&&n!==r.prototype&&a(t,n),t}},"73c9":function(t,e,r){"use strict";r.r(e);var s=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[t.showOrder?r("div",{staticClass:"mx-auto shadow-lg  text-center col-sm-8"},[r("b-card",{staticClass:"my-5",attrs:{"no-body":"","bg-variant":"primary","text-variant":"white"},scopedSlots:t._u([{key:"header",fn:function(){return[r("p",{staticClass:"text-center"},[r("b-spinner",{staticClass:"mr-3",attrs:{type:"grow",small:""}}),t._v("Success "),r("b-spinner",{staticClass:"ml-3",attrs:{type:"grow",small:""}})],1)]},proxy:!0}],null,!1,2325753560)},[r("b-card-body",[r("p",{staticClass:"text-center"},[t._v("Order Submitted Successfully!!")]),r("p",{staticClass:"text-center"},[t._v("Order ID no: "+t._s(t.order_id))])])],1)],1):t._e(),r("b-toast",{attrs:{id:"my-toast",variant:t.isPossible?"info":"warning"},scopedSlots:t._u([{key:"toast-title",fn:function(){return[r("div",{staticClass:"ml-auto text-center"},[r("b-img",{attrs:{blank:"","blank-color":t.isPossible?"#008000":"#ff5555",width:"12",height:"12"}}),t.isPossible?r("strong",{staticClass:"ml-1"},[t._v("Success!!")]):r("strong",{staticClass:"ml-1"},[t._v("Error!!")])],1)]},proxy:!0}])},[r("p",{staticClass:"text-center"},[r("b-spinner",{staticClass:"mr-3",attrs:{type:"grow",small:""}}),t._v(t._s(t.errorMessage)+" "),r("b-spinner",{staticClass:"ml-3",attrs:{type:"grow",small:""}})],1)]),t.showOrder?t._e():r("b-container",{staticClass:"bg-white",attrs:{fluid:""}},[r("b-row",[r("b-col",{attrs:{md:"8"}},[r("b-container",{staticClass:"bg-light shadow-sm my-2"},[t.canOrder?t._e():r("b-form",{staticClass:"mt-2"},[r("b-row",{},[r("b-col",[r("b-form-group",{attrs:{id:"input-group-1",label:"Full Name:","label-for":"input-1"}},[r("b-form-input",{attrs:{id:"input-1",type:"text",required:"",placeholder:"Enter your first and last name here"},model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}})],1),r("b-form-group",{attrs:{id:"input-group-2",label:"Phone Number:","label-for":"input-2"}},[r("b-form-input",{attrs:{id:"input-2",type:"tel",required:"",placeholder:"Enter your phone number here"},model:{value:t.form.phone,callback:function(e){t.$set(t.form,"phone",e)},expression:"form.phone"}})],1)],1),r("b-col",[r("b-form-group",{attrs:{id:"input-group-3",label:"Region:","label-for":"input-3"}},[r("b-form-select",{attrs:{id:"input-3",options:t.regions,required:"",placeholder:"Enter your region"},model:{value:t.form.region,callback:function(e){t.$set(t.form,"region",e)},expression:"form.region"}})],1),r("b-form-group",{attrs:{id:"input-group-4",label:"City:","label-for":"input-4"}},[r("b-form-select",{attrs:{id:"input-4",options:t.regions,required:"",placeholder:"Enter your city"},model:{value:t.form.city,callback:function(e){t.$set(t.form,"city",e)},expression:"form.city"}})],1),r("b-form-group",{attrs:{id:"input-group-5",label:"Area:","label-for":"input-5"}},[r("b-form-select",{attrs:{id:"input-5",options:t.regions,required:"",placeholder:"Enter your area"},model:{value:t.form.area,callback:function(e){t.$set(t.form,"area",e)},expression:"form.area"}})],1),r("b-form-group",{attrs:{id:"input-group-6",label:"Address:","label-for":"input-6"}},[r("b-form-input",{attrs:{id:"input-6",type:"text",required:"",placeholder:"For example:House# 12,Street# 13,Road# 14"},model:{value:t.form.address,callback:function(e){t.$set(t.form,"address",e)},expression:"form.address"}})],1),r("div",{staticClass:"d-flex justify-content-end"},[r("b-button",{attrs:{type:"reset",squared:"",variant:"danger"},on:{click:t.resetOnAction}},[t._v("Reset")]),r("b-button",{staticClass:"ml-2",attrs:{type:"submit",squared:"",variant:"primary",right:""},on:{click:t.submitOnAction}},[t._v("Submit")])],1)],1)],1)],1)],1),t._l(t.order.products,(function(e,s){return r("b-container",{key:s,staticClass:"mb-2",attrs:{value:s}},[r("b-container",{staticClass:"shadow-lg",attrs:{fluid:""}},[r("b-media",{attrs:{"no-body":""}},[r("b-media-aside",{attrs:{"vertical-align":"center"}},[r("b-img",{staticClass:"d-flex img-thumbnill align-self-center",attrs:{width:"150",height:"150",src:e.image.link}})],1),r("b-media-body",[r("b-row",[r("b-col",{staticClass:"text-center",attrs:{md:"6","align-self":"center"}},[r("span",{},[r("strong",[t._v(t._s(e.name))]),r("br"),t._l(e.specifications,(function(e,s,a){return r("small",{key:a,staticStyle:{color:"grey"}},[t._v(" "+t._s(e)+":"+t._s(s)+", ")])}))],2)]),r("b-col",{staticClass:"text-center",attrs:{md:"2","align-self":"center"}},[r("span",{attrs:{id:"prev-price"}},[r("strike",[t._v("৳"+t._s(t.previousPrice(e.curPrice,e.discount)))]),r("strong",{staticClass:"ml-1 d-block",attrs:{id:"discount"}},[t._v(t._s(-e.discount)+"%")])],1),r("span",{attrs:{id:"cur-price"}},[t._v(" ৳"+t._s(e.curPrice))]),r("br")]),r("b-col",{staticClass:"text-center",attrs:{md:"4","align-self":"center"}},[r("p",[t._v(t._s(e.quantity)+"x")])])],1)],1)],1)],1)],1)}))],2),r("b-col",{staticClass:"mt-2"},[r("b-card",{staticClass:"mt-2",attrs:{"no-body":""},scopedSlots:t._u([{key:"header",fn:function(){return[r("h4",{staticClass:"mb-0"},[t._v("Order Summary")])]},proxy:!0},{key:"footer",fn:function(){return[r("b-container",{staticClass:"d-flex justify-content-center",attrs:{fluid:""}},[r("b-overlay",{staticClass:"d-inline block",attrs:{show:t.busy,opacity:"0.4","spinner-small":"","spinner-variant":"primary"}},[r("div",{staticClass:"text-center shadow bg-success"},[r("b-button",{attrs:{variant:"success",id:"confirmButton",disabled:!t.canOrder},on:{click:t.sendOrder}},[t._v(" Confirm Order ")])],1)])],1)]},proxy:!0}],null,!1,895323614)},[r("b-card-body",[r("dl",{staticClass:"row"},[r("dt",{staticClass:"col-6"},[t._v("Subtotal("+t._s(t.order.products.length)+"items)")]),r("dd",{staticClass:"col-6"},[t._v("৳"+t._s(t.order.subTotal))]),r("dt",{staticClass:"col-6"},[t._v("Delivery charge")]),r("dd",{staticClass:"col-6"},[t._v("৳"+t._s(t.order.deliveryCharge))]),r("dt",{staticClass:"col-6"},[t._v("Total")]),r("dd",{staticClass:"col-6"},[t._v("৳"+t._s(t.order.deliveryCharge+t.order.subTotal))])])])],1)],1)],1)],1)],1)},a=[],o=r("5530"),n=r("be3b"),i=r("2f62"),c={name:"OrderSubmitDetails",data:function(){return{isPossible:"",errorMessage:"",busy:!1,order_id:"",showOrder:!1,order:this.$route.query.order,images:["https://static-01.daraz.com.bd/p/7883ac9ce3be09d4e7e9e44f139e8d68.jpg","https://static-01.daraz.com.bd/p/7883ac9ce3be09d4e7e9e44f139e8d68.jpg"],canOrder:!1,form:{name:"",phone:"",region:"",city:"",area:"",address:""},regions:[{value:"Dhaka",text:"Dhaka"},{value:"Chattogram",text:"chittagong"}]}},computed:Object(o["a"])({},Object(i["c"])(["getConfig","user"])),methods:{onHidden:function(){this.$refs.button.focus()},previousPrice:function(t,e){return Math.round(t/(1-e/100))},submitOnAction:function(){this.canOrder=!0},sendOrder:function(){var t=this;this.busy=!0,console.log("order sent"),n["a"].post("/order/add",{products:this.order.products,orderPhoneNo:this.form.phone,email:"dummy@text.fao",address:this.form.address,phoneNo:this.user.phoneNo},this.getConfig()).then((function(e){t.busy=!1,t.dismissableAlert=!0,console.log("order submitted successfully, order id: ".concat(e.data.orderID)),console.log(e),t.order_id=e.data.orderID,t.showOrder=!0})).catch((function(e){t.busy=!1,t.isPossible=!1,t.errorMessage="order submission failed",t.$bvToast.show("my-toast"),console.log("order submission failed"),console.log(e.response)}))},resetOnAction:function(){this.form={name:"",phone:"",region:"",city:"",area:"",address:""}}}},l=c,d=(r("e361"),r("2877")),u=Object(d["a"])(l,s,a,!1,null,"815db36c",null);e["default"]=u.exports},"8d74":function(t,e,r){},"99af":function(t,e,r){"use strict";var s=r("23e7"),a=r("d039"),o=r("e8b5"),n=r("861d"),i=r("7b0b"),c=r("50c4"),l=r("8418"),d=r("65f0"),u=r("1dde"),f=r("b622"),b=r("2d00"),m=f("isConcatSpreadable"),p=9007199254740991,h="Maximum allowed index exceeded",g=b>=51||!a((function(){var t=[];return t[m]=!1,t.concat()[0]!==t})),v=u("concat"),y=function(t){if(!n(t))return!1;var e=t[m];return void 0!==e?!!e:o(t)},_=!g||!v;s({target:"Array",proto:!0,forced:_},{concat:function(t){var e,r,s,a,o,n=i(this),u=d(n,0),f=0;for(e=-1,s=arguments.length;e<s;e++)if(o=-1===e?n:arguments[e],y(o)){if(a=c(o.length),f+a>p)throw TypeError(h);for(r=0;r<a;r++,f++)r in o&&l(u,f,o[r])}else{if(f>=p)throw TypeError(h);l(u,f++,o)}return u.length=f,u}})},a9e3:function(t,e,r){"use strict";var s=r("83ab"),a=r("da84"),o=r("94ca"),n=r("6eeb"),i=r("5135"),c=r("c6b6"),l=r("7156"),d=r("c04e"),u=r("d039"),f=r("7c73"),b=r("241c").f,m=r("06cf").f,p=r("9bf2").f,h=r("58a8").trim,g="Number",v=a[g],y=v.prototype,_=c(f(y))==g,C=function(t){var e,r,s,a,o,n,i,c,l=d(t,!1);if("string"==typeof l&&l.length>2)if(l=h(l),e=l.charCodeAt(0),43===e||45===e){if(r=l.charCodeAt(2),88===r||120===r)return NaN}else if(48===e){switch(l.charCodeAt(1)){case 66:case 98:s=2,a=49;break;case 79:case 111:s=8,a=55;break;default:return+l}for(o=l.slice(2),n=o.length,i=0;i<n;i++)if(c=o.charCodeAt(i),c<48||c>a)return NaN;return parseInt(o,s)}return+l};if(o(g,!v(" 0o1")||!v("0b1")||v("+0x1"))){for(var k,x=function(t){var e=arguments.length<1?0:t,r=this;return r instanceof x&&(_?u((function(){y.valueOf.call(r)})):c(r)!=g)?l(new v(C(e)),r,x):C(e)},w=s?b(v):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),P=0;w.length>P;P++)i(v,k=w[P])&&!i(x,k)&&p(x,k,m(v,k));x.prototype=y,y.constructor=x,n(a,g,x)}},ab13:function(t,e,r){var s=r("b622"),a=s("match");t.exports=function(t){var e=/./;try{"/./"[t](e)}catch(r){try{return e[a]=!1,"/./"[t](e)}catch(s){}}return!1}},caad:function(t,e,r){"use strict";var s=r("23e7"),a=r("4d64").includes,o=r("44d2"),n=r("ae40"),i=n("indexOf",{ACCESSORS:!0,1:0});s({target:"Array",proto:!0,forced:!i},{includes:function(t){return a(this,t,arguments.length>1?arguments[1]:void 0)}}),o("includes")},d58f:function(t,e,r){var s=r("1c0b"),a=r("7b0b"),o=r("44ad"),n=r("50c4"),i=function(t){return function(e,r,i,c){s(r);var l=a(e),d=o(l),u=n(l.length),f=t?u-1:0,b=t?-1:1;if(i<2)while(1){if(f in d){c=d[f],f+=b;break}if(f+=b,t?f<0:u<=f)throw TypeError("Reduce of empty array with no initial value")}for(;t?f>=0:u>f;f+=b)f in d&&(c=r(c,d[f],f,l));return c}};t.exports={left:i(!1),right:i(!0)}},e361:function(t,e,r){"use strict";var s=r("fa57"),a=r.n(s);a.a},f0e2:function(t,e,r){"use strict";r.r(e);var s=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("b-container",{staticClass:"bg-light",attrs:{fluid:""}},[r("b-row",[r("b-col",{staticClass:"my-2",attrs:{md:"8"}},[r("b-container",{attrs:{fluid:""}},t._l(t.cartProducts,(function(e,s){return r("b-container",{key:s,staticClass:"mb-2",attrs:{value:s},model:{value:t.selectedProducts,callback:function(e){t.selectedProducts=e},expression:"selectedProducts"}},[r("b-container",{staticClass:"shadow-sm",attrs:{fluid:""}},[r("b-row",[r("b-col",{attrs:{cols:"1","align-self":"center"}},[r("div",{staticStyle:{cursor:"pointer"}},[t.isSelected(s)?r("b-icon",{attrs:{scale:"1.1",icon:"check-square"},on:{click:function(e){return t.handleCartDeselect(s)}}}):r("b-icon",{attrs:{icon:"square"},on:{click:function(e){return t.handleCartSelect(s)}}})],1)]),r("b-col",{attrs:{cols:"11"}},[r("b-media",{attrs:{"no-body":""}},[r("b-media-aside",{attrs:{"vertical-align":"center"}},[r("router-link",{attrs:{to:{name:"CertainProduct",params:{id:e.id}}}},[r("b-img",{staticClass:"d-flex img-thumbnill align-self-center",attrs:{width:"150",height:"150",src:e.image.link}})],1)],1),r("b-media-body",[r("b-row",[r("b-col",{staticClass:"text-center",attrs:{md:"6","align-self":"center"}},[r("span",{},[r("router-link",{staticStyle:{cursor:"pointer"},attrs:{tag:"span",to:{name:"CertainProduct",params:{id:e.id}}}},[r("strong",[t._v(t._s(e.name))]),r("br")]),t._l(e.specifications,(function(e,s,a){return r("small",{key:a,staticStyle:{color:"grey"}},[t._v(" "+t._s(e)+":"+t._s(s)+", ")])}))],2)]),r("b-col",{staticClass:"text-center",attrs:{md:"2"}},[r("span",{attrs:{id:"prev-price"}},[r("strike",[t._v("৳"+t._s(t.previousPrice(e.curPrice,e.discount)))]),r("strong",{staticClass:"ml-1 d-block",attrs:{id:"discount"}},[t._v(t._s(-e.discount)+"%")])],1),r("span",{attrs:{id:"cur-price"}},[t._v(" ৳"+t._s(e.curPrice))]),r("br"),r("b-avatar",{attrs:{button:"",icon:"trash",variant:"danger",size:""},on:{click:function(e){return t.handleCartRemove(s)}}})],1),r("b-col",{staticClass:"text-center",attrs:{md:"4","align-self":"center"}},[r("span",{staticClass:"d-inline"},[r("b-button",{staticClass:"text-center",attrs:{variant:"light"},on:{click:function(t){e.quantity++}}},[t._v("+")]),r("span",[t._v(t._s(e.quantity))]),r("b-button",{staticClass:"text-center",attrs:{variant:"light"},on:{click:function(t){e.quantity>1?e.quantity--:e.quantity}}},[t._v("-")])],1)])],1)],1)],1)],1)],1)],1)],1)})),1)],1),r("b-col",{attrs:{md:"4"}},[r("b-card",{staticClass:"mt-2",attrs:{no:"",body:""},scopedSlots:t._u([{key:"header",fn:function(){return[r("h4",{staticClass:"mb-0"},[t._v("Order Summary")])]},proxy:!0},{key:"footer",fn:function(){return[r("div",{staticClass:"text-center bg-success"},[r("b-overlay",{staticClass:"d-inline block",attrs:{show:t.busy1,opacity:"0.4","spinner-small":"","spinner-variant":"primary"},on:{hidden:t.onHidden}},[r("b-button",{attrs:{variant:"success",id:"proceedButton",disabled:!t.selectedProducts.length||t.busy1},on:{click:t.handleProceeding}},[t._v(" Proceed to Pay ")])],1)],1)]},proxy:!0}])},[r("b-card-body",[r("dl",{staticClass:"row"},[r("dt",{staticClass:"col-6"},[t._v("Subtotal("+t._s(t.itemCount)+"/"+t._s(t.selectedProducts.length)+" items)")]),r("dd",{staticClass:"col-6"},[t._v("৳"+t._s(t.order.subTotal))]),r("dt",{staticClass:"col-6"},[t._v("Delivery charge")]),r("dd",{staticClass:"col-6"},[t._v("৳"+t._s(t.order.deliveryCharge))]),r("dt",{staticClass:"col-6"},[t._v("Total")]),r("dd",{staticClass:"col-6"},[t._v("৳"+t._s(t.total))])])])],1)],1)],1)],1)},a=[],o=(r("4de4"),r("caad"),r("13d5"),r("2532"),r("b85c")),n=r("5530"),i=r("2f62"),c={name:"CartDetails",data:function(){return{selectedProducts:[],busy:!1,busy1:!1}},computed:Object(n["a"])(Object(n["a"])({},Object(i["c"])(["authToken","cartProducts","cartProductsLoaded"])),{},{itemCount:function(){var t=this;return this.selectedProducts.reduce((function(e,r){return e+t.cartProducts[r].quantity}),0)},order:function(){var t,e={products:[],deliveryCharge:60,subTotal:0},r=Object(o["a"])(this.selectedProducts);try{for(r.s();!(t=r.n()).done;){var s=t.value;if(s<this.cartProducts.length){var a=this.cartProducts[s];e.products.push(a),e.subTotal+=a.curPrice*(1+a.vat/100)*a.quantity}}}catch(n){r.e(n)}finally{r.f()}return e.subTotal=Math.round(e.subTotal),e},total:function(){return this.order.subTotal?this.order.deliveryCharge+this.order.subTotal:0}}),methods:Object(n["a"])(Object(n["a"])({},Object(i["b"])(["cartRemove"])),{},{onHidden:function(){this.$refs.button.focus()},isSelected:function(t){return this.selectedProducts.includes(t)},previousPrice:function(t,e){return Math.round(t/(1-e/100))},handleProceeding:function(){this.authToken?(this.busy1=!0,this.$router.push({name:"OrderSubmitDetails",query:{order:this.order}})):this.$bvModal.show("login-modal")},handleCartRemove:function(t){var e=this;this.busy=!0,console.log("done"),this.cartRemove(t).then((function(r){e.handleCartDeselect(t);for(var s=0;s<e.selectedProducts.length;s++)e.selectedProducts[s]>t&&e.selectedProducts[s]--;e.busy=!1}))},handleCartSelect:function(t){this.selectedProducts.push(t)},handleCartDeselect:function(t){this.selectedProducts=this.selectedProducts.filter((function(e){return e!==t}))}})},l=c,d=(r("fa1c"),r("2877")),u=Object(d["a"])(l,s,a,!1,null,null,null);e["default"]=u.exports},f51c:function(t,e,r){"use strict";r.r(e);var s=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("b-container",{attrs:{fluid:""}},[r("b-toast",{attrs:{id:"my-toast",variant:t.isPossible?"info":"warning"},scopedSlots:t._u([{key:"toast-title",fn:function(){return[r("div",{staticClass:"ml-auto text-center"},[r("b-img",{attrs:{blank:"","blank-color":t.isPossible?"#008000":"#ff5555",width:"12",height:"12"}}),t.isPossible?r("strong",{staticClass:"ml-1"},[t._v("Success!!")]):r("strong",{staticClass:"ml-1"},[t._v("Error!!")])],1)]},proxy:!0}])},[r("p",{staticClass:"text-center"},[r("b-spinner",{staticClass:"mr-3",attrs:{type:"grow",small:""}}),t._v(t._s(t.errorMessage)+" "),r("b-spinner",{staticClass:"ml-3",attrs:{type:"grow",small:""}})],1)]),r("h1",{staticClass:"ml-3"},[t._v("Order History")]),r("b-table",{staticClass:"mx-3",attrs:{items:t.orders,fields:t.fields,striped:"",responsive:"sm"},scopedSlots:t._u([{key:"cell(show_details)",fn:function(e){return[r("b-button",{staticClass:"mr-2",attrs:{size:"sm",variant:e.detailsShowing?"danger":"success"},on:{click:e.toggleDetails}},[t._v(" "+t._s(e.detailsShowing?"Hide":"Show")+" Details ")])]}},{key:"cell(date)",fn:function(e){return[t._v(" "+t._s(t.convertToDate(e.item.currentStatus.date._seconds))+" ")]}},{key:"cell(status)",fn:function(e){return[t._v(" "+t._s(e.item.currentStatus.name)+" ")]}},{key:"cell(total)",fn:function(e){return[t._v(" "+t._s(e.item.total)+" ")]}},{key:"cell(refund)",fn:function(e){return[r("b-overlay",{staticClass:"d-inline block",attrs:{show:t.busy,opacity:"0.4","spinner-small":"","spinner-variant":"primary"}},["ordered"!==e.item.currentStatus.name?r("b-button",{staticClass:"mr-2",attrs:{size:"sm",disabled:t.busy,variant:"warning"},on:{click:function(r){return t.requestRefund(e.item.orderID)}}},[t._v(" refund ")]):t._e()],1),"ordered"===e.item.currentStatus.name?r("b-button",{attrs:{size:"sm",variant:"danger"},on:{click:function(r){return t.cancelOrder(e.item.orderID)}}},[t._v(" cancel order ")]):t._e()]}},{key:"row-details",fn:function(e){return t._l(e.item.products,(function(s,a){return r("b-container",{key:a,staticClass:"mb-2 shadow",attrs:{fluid:"",value:a}},[r("b-media",{attrs:{"no-body":""}},[r("router-link",{attrs:{to:{name:"CertainProduct",params:{id:s.id}}}},[r("b-media-aside",{attrs:{"vertical-align":"center"}},[r("b-img",{staticClass:"d-flex img-thumbnill align-self-center",attrs:{width:"150",src:s.image.link,alt:s.image.name}})],1)],1),r("b-media-body",{staticClass:"my-auto text-center"},[r("b-row",[r("b-col",{staticClass:"my-auto text-center",attrs:{md:"6","align-self":"center"}},[r("span",{},[r("router-link",{staticStyle:{cursor:"pointer"},attrs:{tag:"span",to:{name:"CertainProduct",params:{id:s.id}}}},[r("strong",[t._v(t._s(s.name))]),r("br")]),t._l(s.specifications,(function(e,s){return r("small",{key:e,staticStyle:{color:"grey"}},[t._v(" "+t._s(s)+":"+t._s(e)+", ")])}))],2)]),r("b-col",{staticClass:"my-auto text-center",attrs:{md:"2"}},[r("span",{attrs:{id:"prev-price"}},[r("strike",[t._v("৳"+t._s(t.previousPrice(s.curPrice,s.discount)))]),r("strong",{staticClass:"ml-1 d-block",attrs:{id:"discount"}},[t._v(t._s(-s.discount)+"%")])],1),r("span",{attrs:{id:"cur-price"}},[t._v(" ৳"+t._s(s.curPrice))]),r("br")]),r("b-col",{staticClass:"text-center",attrs:{md:"4","align-self":"center"}},[r("p",[t._v(t._s(s.quantity)+"x")]),s.hasOwnProperty("rating")?r("b-form-rating",{attrs:{inline:"","no-border":"",readonly:"",variant:"warning"},model:{value:s.rating,callback:function(e){t.$set(s,"rating",e)},expression:"product.rating"}}):t._e(),s.hasOwnProperty("rating")||"ordered"===e.item.currentStatus.name||"confirmed"===e.item.currentStatus.name?t._e():r("b-button",{directives:[{name:"b-modal",rawName:"v-b-modal",value:"ratingModal"+a+e.item.orderID,expression:"'ratingModal'+index+row.item.orderID"}],attrs:{variant:"success"}},[t._v("Rate it")]),r("b-modal",{ref:"modal",refInFor:!0,attrs:{id:"ratingModal"+a+e.item.orderID,title:""},on:{ok:function(r){return t.rateProduct(e.item.orderID,a,s.rating)}}},[r("label",{attrs:{for:"rate"}},[t._v("Submit Your Rating")]),r("b-form-rating",{attrs:{id:"rate"},model:{value:s.rating,callback:function(e){t.$set(s,"rating",e)},expression:"product.rating"}})],1)],1)],1)],1)],1)],1)}))}}])}),r("b-container",{staticClass:"d-flex justify-content-center"},[r("b-overlay",{staticClass:"d-inline block",attrs:{show:t.busy1,opacity:"0.4","spinner-small":"","spinner-variant":"primary"}},[t.orderLoadingDone?t._e():r("b-button",{attrs:{disabled:t.busy1,variant:"success"},on:{click:t.loadOrders}},[t._v(" Load More ")])],1)],1)],1)},a=[],o=(r("99af"),r("4de4"),r("a9e3"),r("5530")),n=r("2f62"),i=r("be3b"),c={name:"OrderShower",data:function(){return{fields:["orderID","Date","Total","status","show_details","refund"],orders:[],orderLoadingDone:!0,image:{link:"https://static-01.daraz.com.bd/p/7883ac9ce3be09d4e7e9e44f139e8d68.jpg"},errorMessage:"",isPossible:"",busy:!1,busy1:!1}},computed:Object(o["a"])({},Object(n["c"])(["getConfig","user","userLoaded"])),methods:{loadOrders:function(){var t=this;this.orderLoadingDone||(this.busy1=!0),console.log("orders requested for "+this.user.phoneNo);var e=this.orders.length,r="5";i["a"].post("/orders/all",{phoneNo:this.user.phoneNo},this.getConfig({offset:e,limit:r})).then((function(e){console.log("orders loaded"),console.log(e),t.orders=t.orders.concat(e.data.orders),t.busy1=!1,e.data.orders.length<r?t.orderLoadingDone=!0:t.orderLoadingDone=!1})).catch((function(t){console.log("orders loading failed"),console.log(t.response)}))},rateProduct:function(t,e,r){var s=this;i["a"].post("/order/rate",{phoneNo:this.user.phoneNo,orderID:Number(t),orderIndex:Number(e),rating:r},this.getConfig()).then((function(t){console.log("product-".concat(s.order.products[e].id," rated ").concat(r,"-stars")),console.log(t)})).catch((function(t){console.log("rating product-".concat(s.order.products[e].id," failed")),console.log(t.response)}))},requestRefund:function(t){var e=this;i["a"].post("/order/refund",{phoneNo:this.user.phoneNo,orderID:t},this.getConfig()).then((function(r){e.busy=!1,e.isPossible=!0,e.message="refund requested for order "+e.orderID,console.log("refund requested for order-".concat(t)),console.log(r)})).catch((function(r){e.busy=!1,e.isPossible=!1,e.errorMessage=r.response.data.error,e.$bvToast.show("my-toast"),console.log("requesting refund for order-".concat(t," failed")),console.log(r.response)}))},cancelOrder:function(t){var e=this;i["a"].delete("/order/cancel",this.getConfig(null,{phoneNo:this.user.phoneNo,orderID:t})).then((function(r){console.log("canceled order-".concat(t)),console.log(r),e.orders=e.orders.filter((function(e){return e.orderID!==t}))})).catch((function(e){console.log("cancelling order-".concat(t," failed")),console.log(e.response)}))},previousPrice:function(t,e){return Math.round(t/(1-e/100))},convertToDate:function(t){var e=t,r=1e3*e,s=new Date(r),a=s.toLocaleString();return a},getDiff:function(t,e){var r=new Date,s=this.convertToDate(t),a=r.getTime()-s;return"delivered"===e&&a<7}},created:function(){var t=this;if(this.userLoaded)this.loadOrders();else var e=setInterval((function(){t.userLoaded&&(t.loadOrders(),clearInterval(e))}),"500")}},l=c,d=r("2877"),u=Object(d["a"])(l,s,a,!1,null,"3959f5bf",null);e["default"]=u.exports},fa1c:function(t,e,r){"use strict";var s=r("8d74"),a=r.n(s);a.a},fa57:function(t,e,r){}}]);
//# sourceMappingURL=Order.55fc78ed.js.map