(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["Order"],{"10dc":function(t,e,r){},"3fb4":function(t,e,r){"use strict";r.r(e);var s=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("b-container",[r("h1",[t._v("Order ID:"+t._s(t.$route.params.id))]),r("b-table",{attrs:{items:t.order.status,fields:t.fields},scopedSlots:t._u([{key:"cell(Event_Name)",fn:function(e){return[t._v(" "+t._s(e.item.name)+" ")]}},{key:"cell(Date)",fn:function(e){return[t._v(" "+t._s(t.convertToDate(e.item.date._seconds))+" ")]}},{key:"cell(Comment)",fn:function(e){return[t._v(" "+t._s(e.item.comment?e.item.comment:"Nothing")+" ")]}}])})],1)},o=[],a=r("5530"),n=r("9c03"),i=r("be3b"),c=r("2f62"),l={name:"CertainOrder",data:function(){return{fields:["Event_Name","Date","Comment"],orders:["Ordered","234","was ordered"],order:{}}},computed:Object(a["a"])({},Object(c["c"])(["user","userLoaded","getConfig"])),mixins:[n["a"]],methods:{convertToDate:function(t){var e=t,r=1e3*e,s=new Date(r),o=s.toLocaleString();return o},loadOrder:function(){var t=this,e=this.$route.params.id;console.log("order get called"),i["a"].post("/order/get",{phoneNo:this.user.phoneNo},this.getConfig({orderID:e})).then((function(r){t.order=r.data,console.log("order-".concat(e," loaded")),console.log(r)})).catch((function(t){console.log("order-".concat(e," loading failed")),console.log(t.response)}))}},created:function(){var t=this;if(this.userLoaded)this.loadOrder();else var e=setInterval((function(){t.userLoaded&&(t.loadOrder(),clearInterval(e))}),"500")}},d=l,u=r("2877"),b=Object(u["a"])(d,s,o,!1,null,"85744c38",null);e["default"]=b.exports},7156:function(t,e,r){var s=r("861d"),o=r("d2bb");t.exports=function(t,e,r){var a,n;return o&&"function"==typeof(a=e.constructor)&&a!==r&&s(n=a.prototype)&&n!==r.prototype&&o(t,n),t}},"73c9":function(t,e,r){"use strict";r.r(e);var s=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[t.showOrder?r("div",{staticClass:"mx-auto shadow-lg  text-center col-sm-8"},[r("b-card",{staticClass:"my-5",attrs:{"no-body":"","bg-variant":"primary","text-variant":"white"},scopedSlots:t._u([{key:"header",fn:function(){return[r("p",{staticClass:"text-center"},[r("b-spinner",{staticClass:"mr-3",attrs:{type:"grow",small:""}}),t._v("Success "),r("b-spinner",{staticClass:"ml-3",attrs:{type:"grow",small:""}})],1)]},proxy:!0}],null,!1,2325753560)},[r("b-card-body",[r("p",{staticClass:"text-center"},[t._v("Order Submitted Successfully!!")]),r("p",{staticClass:"text-center"},[t._v("Order ID no: "+t._s(t.order_id))])])],1)],1):t._e(),r("b-toast",{attrs:{id:"my-toast",variant:t.isPossible?"info":"warning"},scopedSlots:t._u([{key:"toast-title",fn:function(){return[r("div",{staticClass:"ml-auto text-center"},[r("b-img",{attrs:{blank:"","blank-color":t.isPossible?"#008000":"#ff5555",width:"12",height:"12"}}),t.isPossible?r("strong",{staticClass:"ml-1"},[t._v("Success!!")]):r("strong",{staticClass:"ml-1"},[t._v("Error!!")])],1)]},proxy:!0}])},[r("p",{staticClass:"text-center"},[r("b-spinner",{staticClass:"mr-3",attrs:{type:"grow",small:""}}),t._v(t._s(t.errorMessage)+" "),r("b-spinner",{staticClass:"ml-3",attrs:{type:"grow",small:""}})],1)]),t.showOrder?t._e():r("b-container",{staticClass:"bg-white",attrs:{fluid:""}},[r("b-row",[r("b-col",{attrs:{md:"8"}},[r("b-container",{staticClass:"bg-light shadow-sm my-2"},[t.canOrder?t._e():r("b-form",{staticClass:"mt-2"},[r("b-row",{},[r("b-col",[r("b-form-group",{attrs:{id:"input-group-1",label:"Full Name:","label-for":"input-1"}},[r("b-form-input",{attrs:{id:"input-1",type:"text",required:"",placeholder:"Enter your first and last name here"},model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}})],1),r("b-form-group",{attrs:{id:"input-group-2",label:"Phone Number:","label-for":"input-2"}},[r("b-form-input",{attrs:{id:"input-2",type:"tel",required:"",placeholder:"Enter your phone number here"},model:{value:t.form.phone,callback:function(e){t.$set(t.form,"phone",e)},expression:"form.phone"}})],1)],1),r("b-col",[r("b-form-group",{attrs:{id:"input-group-3",label:"District:","label-for":"input-3"}},[r("b-form-select",{attrs:{id:"input-3",options:t.districts,required:""},model:{value:t.form.district,callback:function(e){t.$set(t.form,"district",e)},expression:"form.district"}})],1),r("b-form-group",{attrs:{id:"input-group-4",label:"Postal Code:","label-for":"input-4"}},[r("b-form-input",{attrs:{id:"input-4",type:"text",required:"",placeholder:"Enter Postal Code"},model:{value:t.form.postalCode,callback:function(e){t.$set(t.form,"postalCode",e)},expression:"form.postalCode"}})],1),r("b-form-group",{attrs:{id:"input-group-5",label:"Address","label-for":"input-5"}},[r("b-form-input",{attrs:{id:"input-5",type:"text",required:"",placeholder:"For example:House# 12,Street# 13,Road# 14"},model:{value:t.form.address,callback:function(e){t.$set(t.form,"address",e)},expression:"form.address"}})],1),r("div",{staticClass:"d-flex justify-content-end"},[r("b-button",{attrs:{squared:"",variant:"danger"},on:{click:t.resetOnAction}},[t._v("Reset")]),r("b-button",{staticClass:"ml-2",attrs:{type:"submit",squared:"",variant:"primary",right:""},on:{click:t.submitOnAction}},[t._v("Preview")])],1)],1)],1)],1)],1),t._l(t.order.products,(function(e,s){return r("b-container",{key:s,staticClass:"mb-2",attrs:{value:s}},[r("b-container",{staticClass:"shadow-lg",attrs:{fluid:""}},[r("b-media",{attrs:{"no-body":""}},[r("router-link",{attrs:{to:{name:"CertainProduct",params:{id:e.id}}}},[r("b-media-aside",{attrs:{"vertical-align":"center"}},[r("b-img",{staticClass:"d-flex img-thumbnill align-self-center",attrs:{width:"150",height:"150",src:e.image.link}})],1)],1),r("b-media-body",[r("b-row",[r("b-col",{staticClass:"text-center",attrs:{md:"6","align-self":"center"}},[r("span",{},[r("router-link",{staticStyle:{"text-decoration":"none",color:"black"},attrs:{to:{name:"CertainProduct",params:{id:e.id}}}},[r("strong",[t._v(t._s(e.name))]),r("br")]),t._l(e.specifications,(function(e,s,o){return r("small",{key:o,staticStyle:{color:"grey"}},[t._v(" "+t._s(e)+":"+t._s(s)+", ")])}))],2)]),r("b-col",{staticClass:"text-center",attrs:{md:"2","align-self":"center"}},[r("span",{attrs:{id:"prev-price"}},[r("strike",[t._v("৳"+t._s(t.previousPrice(e.curPrice,e.discount)))]),r("strong",{staticClass:"ml-1 d-block",attrs:{id:"discount"}},[t._v(t._s(-e.discount)+"%")])],1),r("span",{attrs:{id:"cur-price"}},[t._v(" ৳"+t._s(e.curPrice))]),r("br")]),r("b-col",{staticClass:"text-center",attrs:{md:"4","align-self":"center"}},[r("p",[t._v(t._s(e.quantity)+"x")])])],1)],1)],1)],1)],1)}))],2),r("b-col",{staticClass:"mt-2"},[r("b-card",{staticClass:"mt-2",attrs:{"no-body":""},scopedSlots:t._u([{key:"header",fn:function(){return[r("h4",{staticClass:"mb-0"},[t._v("Order Summary")])]},proxy:!0},{key:"footer",fn:function(){return[r("b-container",{staticClass:"d-flex justify-content-center",attrs:{fluid:""}},[r("b-overlay",{staticClass:"d-inline block",attrs:{show:t.busy,opacity:"0.4","spinner-small":"","spinner-variant":"primary"}},[r("div",{staticClass:"text-center shadow bg-success"},[r("b-button",{attrs:{variant:"success",id:"confirmButton",disabled:!t.canOrder},on:{click:t.sendOrder}},[t._v(" Confirm Order ")])],1)])],1)]},proxy:!0}],null,!1,895323614)},[r("b-card-body",[r("dl",{staticClass:"row"},[r("dt",{staticClass:"col-6"},[t._v("Subtotal("+t._s(t.itemCount)+"/"+t._s(t.productCount)+" items)")]),r("dd",{staticClass:"col-6"},[t._v("৳"+t._s(t.order.subTotal))]),r("dt",{staticClass:"col-6"},[t._v("Delivery charge")]),r("dd",{staticClass:"col-6"},[t._v("৳"+t._s(t.deliveryCharge))]),r("dt",{staticClass:"col-6"},[t._v("Total")]),r("dd",{staticClass:"col-6"},[t._v("৳"+t._s(t.deliveryCharge+t.order.subTotal))])])])],1)],1)],1)],1)],1)},o=[],a=(r("13d5"),r("b0c0"),r("5530")),n=r("be3b"),i=r("2f62"),c={name:"OrderSubmitDetails",data:function(){return{isPossible:"",errorMessage:"",busy:!1,order_id:"",showOrder:!1,order:this.$route.query.order,canOrder:!1,form:{name:"",phone:"",district:"",postalCode:"",address:""}}},computed:Object(a["a"])(Object(a["a"])({},Object(i["c"])(["getConfig","user","selectedProducts","districts"])),{},{productCount:function(){return this.order.products?this.order.products.length:""},itemCount:function(){return this.order.products?this.order.products.reduce((function(t,e){return t+e.quantity}),0):""},deliveryCharge:function(){return"Bogura"===this.form.district?0:60}}),methods:Object(a["a"])(Object(a["a"])({},Object(i["b"])(["cartRemove"])),{},{onHidden:function(){this.$refs.button.focus()},previousPrice:function(t,e){return Math.round(t/(1-e/100))},submitOnAction:function(){this.canOrder=!0},sendOrder:function(){var t=this;this.busy=!0,console.log("order sent"),n["a"].post("/order/add",{products:this.order.products,orderPhoneNo:this.form.phone,email:"dummy@text.fao",address:this.form.address,phoneNo:this.user.phoneNo},this.getConfig()).then((function(e){t.busy=!1,t.dismissableAlert=!0,console.log("order submitted successfully, order id: ".concat(e.data.orderID)),console.log(e),t.order_id=e.data.orderID,t.showOrder=!0,t.selectedProducts.length&&t.cartRemove(t.selectedProducts)})).catch((function(e){t.busy=!1,t.isPossible=!1,t.errorMessage="order submission failed",t.$bvToast.show("my-toast"),console.log("order submission failed"),console.log(e.response)}))},resetOnAction:function(){this.form={name:this.user.name,phone:this.user.phoneNo,district:this.user.district,postalCode:this.user.postalCode,address:this.user.address}}}),created:function(){this.order&&this.order.products?this.resetOnAction():this.$router.push({name:"Home"})}},l=c,d=(r("f6f1"),r("2877")),u=Object(d["a"])(l,s,o,!1,null,"804bf3d4",null);e["default"]=u.exports},"8d74":function(t,e,r){},"9c03":function(t,e,r){"use strict";r("d3b7");var s=r("be3b"),o={methods:{loader:function(t,e,r){return new Promise((function(o,a){s["a"].get(t,{params:e}).then((function(t){console.log("".concat(r," loaded")),console.log(t),o(t)})).catch((function(t){console.log("".concat(r," loading failed")),console.log(t.response)}))}))}}};e["a"]=o},a9e3:function(t,e,r){"use strict";var s=r("83ab"),o=r("da84"),a=r("94ca"),n=r("6eeb"),i=r("5135"),c=r("c6b6"),l=r("7156"),d=r("c04e"),u=r("d039"),b=r("7c73"),f=r("241c").f,m=r("06cf").f,p=r("9bf2").f,h=r("58a8").trim,g="Number",v=o[g],_=v.prototype,y=c(b(_))==g,C=function(t){var e,r,s,o,a,n,i,c,l=d(t,!1);if("string"==typeof l&&l.length>2)if(l=h(l),e=l.charCodeAt(0),43===e||45===e){if(r=l.charCodeAt(2),88===r||120===r)return NaN}else if(48===e){switch(l.charCodeAt(1)){case 66:case 98:s=2,o=49;break;case 79:case 111:s=8,o=55;break;default:return+l}for(a=l.slice(2),n=a.length,i=0;i<n;i++)if(c=a.charCodeAt(i),c<48||c>o)return NaN;return parseInt(a,s)}return+l};if(a(g,!v(" 0o1")||!v("0b1")||v("+0x1"))){for(var k,w=function(t){var e=arguments.length<1?0:t,r=this;return r instanceof w&&(y?u((function(){_.valueOf.call(r)})):c(r)!=g)?l(new v(C(e)),r,w):C(e)},x=s?f(v):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),O=0;x.length>O;O++)i(v,k=x[O])&&!i(w,k)&&p(w,k,m(v,k));w.prototype=_,_.constructor=w,n(o,g,w)}},f0e2:function(t,e,r){"use strict";r.r(e);var s=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("b-container",{staticClass:"bg-light",attrs:{fluid:""}},[t.cartProducts.length?t._e():r("div",{staticClass:"mx-auto shadow-lg  text-center col-sm-8"},[r("b-card",{staticClass:"my-5",attrs:{"no-body":"","bg-variant":"info","text-variant":"white"},scopedSlots:t._u([{key:"header",fn:function(){return[r("p",{staticClass:"text-center"},[r("b-spinner",{staticClass:"mr-3",attrs:{type:"grow",variant:"warning",small:""}}),t._v("Attention!! "),r("b-spinner",{staticClass:"ml-3",attrs:{type:"grow",variant:"warning",small:""}})],1)]},proxy:!0}],null,!1,522353389)},[r("b-card-body",[r("p",{staticClass:"text-center"},[t._v("There is no product in Bag")]),r("p",{staticClass:"text-center"},[t._v("Enjoy shopping with Ajraar")])])],1)],1),t.cartProducts.length?r("b-row",{staticClass:"my-2"},[r("b-col",{attrs:{"align-self":"center"}},[r("span",{staticStyle:{cursor:"pointer"}},[t.allSelected?r("b-icon",{attrs:{scale:"1.1",icon:"check-square"},on:{click:t.handleAllDeselect}}):r("b-icon",{attrs:{icon:"square"},on:{click:t.handleAllSelect}})],1),t._v(" "+t._s(t.allSelected?"Deselect":"Select")+" All ")]),t.cartProducts.length?r("b-col",{attrs:{"align-self":"center"}},[r("b-button",{attrs:{variant:"danger",disabled:0===this.selectedProducts.length||t.busyInDelete},on:{click:t.handleDeleteSelected}},[t._v(" Delete Selected ")])],1):t._e()],1):t._e(),r("b-row",[r("b-col",{staticClass:"my-2",attrs:{md:"8"}},[r("b-container",{attrs:{fluid:""}},t._l(t.cartProducts,(function(e,s){return r("b-container",{key:s,staticClass:"mb-2",attrs:{value:s},model:{value:t.selectedProducts,callback:function(e){t.selectedProducts=e},expression:"selectedProducts"}},[r("b-container",{staticClass:"shadow-sm",attrs:{fluid:""}},[r("b-row",[r("b-col",{attrs:{cols:"1","align-self":"center"}},[r("div",{staticStyle:{cursor:"pointer"}},[t.isSelected(s)?r("b-icon",{attrs:{scale:"1.1",icon:"check-square"},on:{click:function(e){return t.handleCartDeselect(s)}}}):r("b-icon",{attrs:{icon:"square"},on:{click:function(e){return t.handleCartSelect(s)}}})],1)]),r("b-col",{attrs:{cols:"11"}},[r("b-media",{attrs:{"no-body":""}},[r("b-media-aside",{attrs:{"vertical-align":"center"}},[r("router-link",{attrs:{to:{name:"CertainProduct",params:{id:e.id}}}},[r("b-img",{staticClass:"d-flex img-thumbnill align-self-center",attrs:{width:"150",height:"150",src:e.image.link}})],1)],1),r("b-media-body",[r("b-row",[r("b-col",{staticClass:"text-center",attrs:{md:"6","align-self":"center"}},[r("span",{},[r("router-link",{staticClass:"text-decoration-none",staticStyle:{color:"black"},attrs:{to:{name:"CertainProduct",params:{id:e.id}}}},[r("strong",[t._v(t._s(e.name))]),r("br")]),t._l(e.specifications,(function(e,s,o){return r("small",{key:o,staticStyle:{color:"grey"}},[t._v(" "+t._s(s)+":"+t._s(e)+", ")])}))],2)]),r("b-col",{staticClass:"text-center",attrs:{md:"2"}},[r("span",{attrs:{id:"prev-price"}},[r("strike",[t._v("৳"+t._s(t.previousPrice(e.curPrice,e.discount)))]),r("strong",{staticClass:"ml-1 d-block",attrs:{id:"discount"}},[t._v(t._s(-e.discount)+"%")])],1),r("span",{attrs:{id:"cur-price"}},[t._v(" ৳"+t._s(e.curPrice))]),r("br"),r("b-avatar",{attrs:{button:"",icon:"trash",variant:"danger",size:"",disabled:t.busyInDelete},on:{click:function(e){return t.handleCartRemove(s)}}})],1),r("b-col",{staticClass:"text-center",attrs:{md:"4","align-self":"center"}},[r("span",{staticClass:"d-inline"},[r("b-button",{staticClass:"text-center",attrs:{variant:"light"},on:{click:function(t){e.quantity++}}},[t._v("+")]),r("span",[t._v(" "+t._s(e.quantity)+" ")]),r("b-button",{staticClass:"text-center",attrs:{variant:"light"},on:{click:function(t){e.quantity>1?e.quantity--:e.quantity}}},[t._v("-")])],1)])],1)],1)],1)],1)],1)],1)],1)})),1)],1),t.cartProducts.length?r("b-col",{attrs:{md:"4"}},[r("b-card",{staticClass:"mt-2",attrs:{no:"",body:""},scopedSlots:t._u([{key:"header",fn:function(){return[r("h4",{staticClass:"mb-0"},[t._v("Order Summary")])]},proxy:!0},{key:"footer",fn:function(){return[r("div",{staticClass:"text-center bg-success"},[r("b-overlay",{staticClass:"d-inline block",attrs:{show:t.busy1,opacity:"0.4","spinner-small":"","spinner-variant":"primary"},on:{hidden:t.onHidden}},[r("b-button",{attrs:{variant:"success",id:"proceedButton",disabled:!t.selectedProducts.length||t.busy1},on:{click:t.handleProceeding}},[t._v(" Proceed to Pay ")])],1)],1)]},proxy:!0}],null,!1,622926450)},[r("b-card-body",[r("dl",{staticClass:"row"},[r("dt",{staticClass:"col-6"},[t._v("Subtotal("+t._s(t.itemCount)+"/"+t._s(t.selectedProducts.length)+" items)")]),r("dd",{staticClass:"col-6"},[t._v("৳"+t._s(t.order.subTotal))]),r("dt",{staticClass:"col-6"},[t._v("Delivery charge")]),r("dd",{staticClass:"col-6"},[t._v("৳"+t._s(t.order.deliveryCharge))]),r("dt",{staticClass:"col-6"},[t._v("Total")]),r("dd",{staticClass:"col-6"},[t._v("৳"+t._s(t.total))])])])],1)],1):t._e()],1)],1)},o=[],a=r("b85c"),n=r("5530"),i=r("2f62"),c={name:"CartDetails",data:function(){return{busy1:!1}},computed:Object(n["a"])(Object(n["a"])({},Object(i["c"])(["authToken","cartProducts","selectedProducts","allSelected","itemCount","isSelected","busyInDelete"])),{},{order:function(){var t,e={products:[],deliveryCharge:60,subTotal:0},r=Object(a["a"])(this.selectedProducts);try{for(r.s();!(t=r.n()).done;){var s=t.value;if(s<this.cartProducts.length){var o=this.cartProducts[s];e.products.push(o),e.subTotal+=o.curPrice*(1+o.vat/100)*o.quantity}}}catch(n){r.e(n)}finally{r.f()}return e.subTotal=Math.round(e.subTotal),e},total:function(){return this.order.subTotal?this.order.deliveryCharge+this.order.subTotal:0}}),methods:Object(n["a"])(Object(n["a"])({},Object(i["b"])(["cartRemove","loadCart","handleCartSelect","handleCartDeselect","handleAllSelect","handleAllDeselect","handleCartRemove","handleDeleteSelected"])),{},{onHidden:function(){this.$refs.button.focus()},previousPrice:function(t,e){return Math.round(t/(1-e/100))},handleProceeding:function(){this.authToken?(this.busy1=!0,this.$router.push({name:"OrderSubmitDetails",query:{order:this.order,removed:{indices:this.selectedProducts}}})):this.$bvModal.show("login-modal")}}),created:function(){this.loadCart(!0)}},l=c,d=(r("fa1c"),r("2877")),u=Object(d["a"])(l,s,o,!1,null,null,null);e["default"]=u.exports},f51c:function(t,e,r){"use strict";r.r(e);var s=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("b-container",{attrs:{fluid:""}},[r("b-toast",{attrs:{id:"my-toast",variant:t.isPossible?"info":"warning"},scopedSlots:t._u([{key:"toast-title",fn:function(){return[r("div",{staticClass:"ml-auto text-center"},[r("b-img",{attrs:{blank:"","blank-color":t.isPossible?"#008000":"#ff5555",width:"12",height:"12"}}),t.isPossible?r("strong",{staticClass:"ml-1"},[t._v("Success!!")]):r("strong",{staticClass:"ml-1"},[t._v("Error!!")])],1)]},proxy:!0}])},[r("p",{staticClass:"text-center"},[r("b-spinner",{staticClass:"mr-3",attrs:{type:"grow",small:""}}),t._v(t._s(t.errorMessage)+" "),r("b-spinner",{staticClass:"ml-3",attrs:{type:"grow",small:""}})],1)]),r("h1",{staticClass:"ml-3"},[t._v("Order History")]),r("b-table",{staticClass:"mx-3",attrs:{items:t.orders,fields:t.fields,striped:"",responsive:"sm"},scopedSlots:t._u([{key:"cell(show_details)",fn:function(e){return[r("b-button",{staticClass:"mr-2",attrs:{size:"sm",variant:e.detailsShowing?"danger":"success"},on:{click:e.toggleDetails}},[t._v(" "+t._s(e.detailsShowing?"Hide":"Show")+" Details ")])]}},{key:"cell(event_log)",fn:function(e){return[r("b-button",{staticClass:"mr-2",attrs:{size:"sm",variant:"success"},on:{click:function(r){return t.clicking(e.item.orderID)}}},[t._v(" Event log ")])]}},{key:"cell(date)",fn:function(e){return[t._v(" "+t._s(t.convertToDate(e.item.ordered._seconds))+" ")]}},{key:"cell(status)",fn:function(e){return[t._v(" "+t._s(e.item.currentStatus.name)),r("br"),t._v(" "+t._s(t.convertToDate(e.item.currentStatus.date._seconds))+" ")]}},{key:"cell(total)",fn:function(e){return[t._v(" "+t._s(e.item.total)+" ")]}},{key:"cell(refund)",fn:function(e){return[r("b-overlay",{staticClass:"d-inline block",attrs:{show:t.busy,opacity:"0.4","spinner-small":"","spinner-variant":"primary"}},["delivered"===e.item.currentStatus.name?r("b-button",{staticClass:"mr-2",attrs:{size:"sm",disabled:t.busy,variant:"warning"},on:{click:function(r){return t.requestRefund(e.item)}}},[t._v(" Request Refund ")]):t._e()],1),"ordered"===e.item.currentStatus.name?r("b-button",{attrs:{size:"sm",variant:"danger"},on:{click:function(r){return t.cancelOrder(e.item.orderID)}}},[t._v(" Cancel Order ")]):t._e()]}},{key:"row-details",fn:function(e){return t._l(e.item.products,(function(s,o){return r("b-container",{key:o,staticClass:"mb-2 shadow",attrs:{fluid:"",value:o}},[r("b-media",{attrs:{"no-body":""}},[r("router-link",{attrs:{to:{name:"CertainProduct",params:{id:s.id}}}},[r("b-media-aside",{attrs:{"vertical-align":"center"}},[r("b-img",{staticClass:"d-flex img-thumbnill align-self-center",attrs:{width:"150",height:"150",src:s.image.link,alt:s.image.name}})],1)],1),r("b-media-body",{staticClass:"my-auto text-center"},[r("b-row",[r("b-col",{staticClass:"my-auto text-center",attrs:{md:"6","align-self":"center"}},[r("span",{},[r("router-link",{staticClass:"text-decoration-none",staticStyle:{color:"black"},attrs:{to:{name:"CertainProduct",params:{id:s.id}}}},[r("strong",[t._v(t._s(s.name))]),r("br")]),t._l(s.specifications,(function(e,s){return r("small",{key:e,staticStyle:{color:"grey"}},[t._v(" "+t._s(s)+":"+t._s(e)+", ")])}))],2)]),r("b-col",{staticClass:"my-auto text-center",attrs:{md:"2"}},[r("span",{attrs:{id:"prev-price"}},[r("strike",[t._v("৳"+t._s(t.previousPrice(s.curPrice,s.discount)))]),r("strong",{staticClass:"ml-1 d-block",attrs:{id:"discount"}},[t._v(t._s(-s.discount)+"%")])],1),r("span",{attrs:{id:"cur-price"}},[t._v(" ৳"+t._s(s.curPrice))]),r("br")]),r("b-col",{staticClass:"text-center",attrs:{md:"4","align-self":"center"}},[r("p",[t._v(t._s(s.quantity)+"x")]),s.hasOwnProperty("rating")?r("b-form-rating",{attrs:{inline:"","no-border":"",readonly:"",variant:"warning"},model:{value:s.rating,callback:function(e){t.$set(s,"rating",e)},expression:"product.rating"}}):t._e(),s.rating||"ordered"===e.item.currentStatus.name||"confirmed"===e.item.currentStatus.name?t._e():r("b-button",{directives:[{name:"b-modal",rawName:"v-b-modal",value:"ratingModal"+o+e.item.orderID,expression:"'ratingModal'+index+row.item.orderID"}],attrs:{variant:"success"}},[t._v("Rate it")]),r("b-modal",{ref:"modal",refInFor:!0,attrs:{id:"ratingModal"+o+e.item.orderID,title:"Submit Your Rating","ok-title":"Submit"},on:{ok:function(r){return t.rateProduct(e.item.orderID,o,s)}}},[r("b-form-rating",{attrs:{id:"rate"},model:{value:s.localRating,callback:function(e){t.$set(s,"localRating",e)},expression:"product.localRating"}}),r("br"),r("b-form-textarea",{attrs:{id:"review-area",placeholder:"Write a review...",rows:"3","max-rows":"6"},model:{value:s.localReview,callback:function(e){t.$set(s,"localReview",e)},expression:"product.localReview"}})],1)],1)],1)],1)],1)],1)}))}}])}),r("b-container",{staticClass:"d-flex justify-content-center"},[r("b-overlay",{staticClass:"d-inline block",attrs:{show:t.busy1,opacity:"0.4","spinner-small":"","spinner-variant":"primary"}},[t.orderLoadingDone?t._e():r("b-button",{attrs:{disabled:t.busy1,variant:"success"},on:{click:t.loadOrders}},[t._v(" Load More ")])],1)],1)],1)},o=[],a=(r("99af"),r("4de4"),r("a9e3"),r("5530")),n=r("2f62"),i=r("be3b"),c={name:"OrderShower",data:function(){return{fields:["orderID","Date","Total","status","show_details","event_log","refund"],orders:[],orderLoadingDone:!0,image:{link:"https://static-01.daraz.com.bd/p/7883ac9ce3be09d4e7e9e44f139e8d68.jpg"},errorMessage:"",isPossible:"",busy:!1,busy1:!1}},computed:Object(a["a"])({},Object(n["c"])(["getConfig","user","userLoaded"])),methods:{loadOrders:function(){var t=this;this.orderLoadingDone||(this.busy1=!0),console.log("orders requested");var e=this.orders.length,r="5";i["a"].post("/orders/all",{phoneNo:this.user.phoneNo},this.getConfig({offset:e,limit:r})).then((function(e){console.log("orders loaded"),console.log(e),t.orders=t.orders.concat(e.data.orders),t.busy1=!1,t.orderLoadingDone=e.data.orders.length<r})).catch((function(t){console.log("orders loading failed"),console.log(t.response)}))},reloadAllCurrentOrders:function(){var t=this;this.orderLoadingDone||(this.busy1=!0),console.log("orders requested");var e=0,r=this.orders.length;i["a"].post("/orders/all",{phoneNo:this.user.phoneNo},this.getConfig({offset:e,limit:r})).then((function(e){console.log("orders loaded"),console.log(e),t.orders=e.data.orders,t.busy1=!1,t.orderLoadingDone=e.data.orders.length<r})).catch((function(t){console.log("orders loading failed"),console.log(t.response)}))},rateProduct:function(t,e,r){var s=r.localRating,o=r.localReview;i["a"].post("/order/rate",{phoneNo:this.user.phoneNo,orderID:Number(t),orderIndex:Number(e),rating:s,review:o},this.getConfig()).then((function(t){console.log("product-".concat(r.id," rated ").concat(s,"-stars")),r.rating=s,r.localRating=null,r.localReview=null,console.log(t)})).catch((function(t){console.log("rating product-".concat(r.id," failed")),console.log(t.response)}))},clicking:function(t){this.busy=!0,this.$router.push({name:"CertainOrder",params:{id:t}})},requestRefund:function(t){var e=this,r=t.orderID;i["a"].post("/order/refund",{phoneNo:this.user.phoneNo,orderID:r},this.getConfig()).then((function(s){t.currentStatus=new Date(s.data.currentStatus),e.busy=!1,e.isPossible=!0,e.message="refund requested for order "+r,console.log("refund requested for order-".concat(r)),console.log(s)})).catch((function(t){e.busy=!1,e.isPossible=!1,e.errorMessage=t.response.data.error,e.$bvToast.show("my-toast"),console.log("requesting refund for order-".concat(r," failed")),console.log(t.response)}))},cancelOrder:function(t){var e=this;i["a"].delete("/order/cancel",this.getConfig(null,{phoneNo:this.user.phoneNo,orderID:t})).then((function(r){console.log("canceled order-".concat(t)),console.log(r),e.orders=e.orders.filter((function(e){return e.orderID!==t}))})).catch((function(e){console.log("cancelling order-".concat(t," failed")),console.log(e.response)}))},previousPrice:function(t,e){return Math.round(t/(1-e/100))},convertToDate:function(t){var e=t,r=1e3*e,s=new Date(r),o=s.toLocaleString();return o},getDiff:function(t,e){var r=new Date,s=this.convertToDate(t),o=r.getTime()-s;return"delivered"===e&&o<7}},created:function(){var t=this;if(this.userLoaded)this.loadOrders();else var e=setInterval((function(){t.userLoaded&&(t.loadOrders(),clearInterval(e))}),"500")}},l=c,d=r("2877"),u=Object(d["a"])(l,s,o,!1,null,"46ce5806",null);e["default"]=u.exports},f6f1:function(t,e,r){"use strict";var s=r("10dc"),o=r.n(s);o.a},fa1c:function(t,e,r){"use strict";var s=r("8d74"),o=r.n(s);o.a}}]);
//# sourceMappingURL=Order.1f9fd31c.js.map