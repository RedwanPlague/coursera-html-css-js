(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["Search"],{"01b8":function(t,e,r){},1276:function(t,e,r){"use strict";var s=r("d784"),o=r("44e7"),i=r("825a"),n=r("1d80"),a=r("4840"),c=r("8aa5"),u=r("50c4"),l=r("14c3"),d=r("9263"),h=r("d039"),p=[].push,f=Math.min,v=4294967295,b=!h((function(){return!RegExp(v,"y")}));s("split",2,(function(t,e,r){var s;return s="c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1).length||2!="ab".split(/(?:ab)*/).length||4!=".".split(/(.?)(.?)/).length||".".split(/()()/).length>1||"".split(/.?/).length?function(t,r){var s=String(n(this)),i=void 0===r?v:r>>>0;if(0===i)return[];if(void 0===t)return[s];if(!o(t))return e.call(s,t,i);var a,c,u,l=[],h=(t.ignoreCase?"i":"")+(t.multiline?"m":"")+(t.unicode?"u":"")+(t.sticky?"y":""),f=0,b=new RegExp(t.source,h+"g");while(a=d.call(b,s)){if(c=b.lastIndex,c>f&&(l.push(s.slice(f,a.index)),a.length>1&&a.index<s.length&&p.apply(l,a.slice(1)),u=a[0].length,f=c,l.length>=i))break;b.lastIndex===a.index&&b.lastIndex++}return f===s.length?!u&&b.test("")||l.push(""):l.push(s.slice(f)),l.length>i?l.slice(0,i):l}:"0".split(void 0,0).length?function(t,r){return void 0===t&&0===r?[]:e.call(this,t,r)}:e,[function(e,r){var o=n(this),i=void 0==e?void 0:e[t];return void 0!==i?i.call(e,o,r):s.call(String(o),e,r)},function(t,o){var n=r(s,t,this,o,s!==e);if(n.done)return n.value;var d=i(t),h=String(this),p=a(d,RegExp),g=d.unicode,m=(d.ignoreCase?"i":"")+(d.multiline?"m":"")+(d.unicode?"u":"")+(b?"y":"g"),y=new p(b?d:"^(?:"+d.source+")",m),x=void 0===o?v:o>>>0;if(0===x)return[];if(0===h.length)return null===l(y,h)?[h]:[];var w=0,_=0,S=[];while(_<h.length){y.lastIndex=b?_:0;var P,k=l(y,b?h:h.slice(_));if(null===k||(P=f(u(y.lastIndex+(b?0:_)),h.length))===w)_=c(h,_,g);else{if(S.push(h.slice(w,_)),S.length===x)return S;for(var C=1;C<=k.length-1;C++)if(S.push(k[C]),S.length===x)return S;_=w=P}}return S.push(h.slice(w)),S}]}),!b)},"312e":function(t,e,r){"use strict";r.r(e);var s=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("b-container",{attrs:{fluid:!0}},[r("div",{staticClass:"mx-auto text-center my-3"},[r("h1",[t._v("Search Results")])]),r("product-sorter",{attrs:{products:t.products}}),r("b-row",t._l(t.products,(function(t,e){return r("b-col",{key:e,staticClass:"productClass",attrs:{lg:"2",md:"3",sm:"4",cols:"6"}},[r("product-box",{attrs:{product:t}})],1)})),1),r("hr"),t.productLoadingDone?t._e():r("div",{staticClass:"my-3 text-center"},[r("b-overlay",{staticClass:"d-inline block",attrs:{show:t.busy,opacity:"0.4","spinner-small":"","spinner-variant":"primary"}},[r("b-button",{attrs:{variant:"success",disabled:t.busy},on:{click:t.loadSearchProducts}},[t._v(" "+t._s(t.products.length?"Load More":"Loading")+" Search Results ")])],1)],1)],1)},o=[],i=(r("99af"),r("d81d"),r("fb6a"),r("ac1f"),r("841c"),r("5530")),n=r("3f5c"),a=r("7252"),c=r("be3b"),u=r("6062"),l=r("2f62"),d={name:"SearchOnAll",title:"Search Results",data:function(){return{products:[],productLoadingDone:!1,searchResult:[],searchResultFound:!1,busy:!1}},computed:Object(i["a"])({},Object(l["c"])(["searchProducts","searchProductsLoaded"])),components:{ProductBox:n["a"],ProductSorter:a["a"]},methods:{loadSearchResults:function(){if(!this.searchResultFound){var t=new u["a"](this.searchProducts,{keys:["name"]});this.searchResult=t.search(this.$route.query.string).map((function(t){return t.item.id})),this.searchResultFound=!0}},loadSearchProducts:function(){var t=this;this.loadSearchResults(),this.busy=!0;var e=this.products.length,r=e+parseInt("6"),s=!1;r>this.searchResult.length&&(s=!0,r=this.searchResult.length);var o=this.searchResult.slice(e,r);c["a"].post("/search",{productIds:o}).then((function(e){console.log("Search products loaded"),console.log(e),t.products=t.products.concat(e.data.products),s&&(t.productLoadingDone=!0),t.busy=!1})).catch((function(){t.$notification.error("Search products loading failed"),t.busy=!1}))},initialLoader:function(){var t=this;if(this.searchResultFound=!1,this.products=[],this.productLoadingDone=!1,this.searchProductsLoaded)this.loadSearchProducts();else var e=setInterval((function(){t.searchProductsLoaded&&(t.loadSearchProducts(),clearInterval(e))}),"500")}},watch:{$route:function(t,e){this.initialLoader()}},created:function(){this.initialLoader()}},h=d,p=r("2877"),f=Object(p["a"])(h,s,o,!1,null,"3637e3b3",null);e["default"]=f.exports},"3f5c":function(t,e,r){"use strict";var s=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("div",{class:{shadow:t.shadow},attrs:{id:"holder"},on:{mouseenter:function(e){t.shadow=!0},mouseleave:function(e){t.shadow=!1}}},[r("b-overlay",{attrs:{show:t.busy,opacity:"0.7","spinner-large":"","spinner-variant":"primary"},on:{hidden:t.onHidden}},[r("b-card",{on:{click:t.clicking}},[r("b-card-img",{ref:"img",staticStyle:{"border-radius":"0"},attrs:{src:t.imgSrc,alt:t.product.name,height:t.isArrival?"90px":"180px",top:""}}),r("b-card-text",{},[r("div",{staticClass:"mx-auto text-center text-truncate"},[t._v(" "+t._s(t.product.name)+" ")]),t.isArrival?t._e():r("b-form-rating",{staticClass:"mx-auto text-center mt-n5",staticStyle:{transform:"scale(0.8, 0.8)"},attrs:{inline:"","no-border":"",variant:"warning",readonly:"",size:"sm",precision:"1"},model:{value:t.product.rating,callback:function(e){t.$set(t.product,"rating",e)},expression:"product.rating"}}),t.isArrival?t._e():r("div",{staticClass:"mx-auto text-center mt-n1"},[t.product.discount>0?r("span",[r("span",{staticClass:"strike",attrs:{id:"prev-price"}},[t._v("৳"+t._s(t.prevPrice))]),r("sup",{attrs:{id:"discount"}},[t._v("-"+t._s(t.product.discount)+"%")])]):t._e(),r("span",{attrs:{id:"cur-price"}},[t._v(" ৳"+t._s(t.product.curPrice))])])],1)],1)],1),t.isArrival?t._e():r("b-button",{staticClass:"mx-auto my-auto text-center",style:{opacity:1*t.shadow,border:0},attrs:{id:"add-to-cart","aria-controls":"sidebar-right-footer"+t.product.id,"aria-expanded":t.show},on:{click:function(e){return t.initialHandler(!0)}}},[t._v(" Add to Bag ")])],1),r("b-sidebar",{attrs:{id:"sidebar-right-footer"+t.product.id,"aria-label":"Sidebar with custom footer",shadow:"",backdrop:"",lazy:""},scopedSlots:t._u([{key:"title",fn:function(){return[r("span",{},[t._v("There are some options."),r("br"),t._v("Choose yours:")])]},proxy:!0},{key:"footer",fn:function(){return[r("div",{staticClass:"mx-auto text-center"},[r("b-button",{staticClass:"col-6",attrs:{squared:"",variant:"warning"},on:{click:t.doReset}},[t._v("Reset")]),r("b-button",{staticClass:"col-6",attrs:{squared:"",variant:"success",disabled:!t.allSelected},on:{click:t.finalHandler}},[t._v(" "+t._s(t.cartButtonPressed?"Add to Bag":"Check Out")+" ")])],1)]},proxy:!0}]),model:{value:t.show,callback:function(e){t.show=e},expression:"show"}},[r("b-overlay",{staticStyle:{height:"500px"},attrs:{show:!t.productLoaded,opacity:"0.4",rounded:"sm"},scopedSlots:t._u([{key:"overlay",fn:function(){return[r("div",{staticClass:"text-center"},[r("b-icon",{attrs:{icon:"stopwatch","font-scale":"3",animation:"cylon"}}),r("p",{attrs:{id:"cancel-label"}},[t._v("Please wait...")])],1)]},proxy:!0}])},[t.productLoaded?r("div",{staticClass:"mx-auto d-flex flex-column text-center"},[r("b-list-group",[t._l(t.selector,(function(e,s,o){return r("span",{key:o},[r("b-list-group-item",[r("b-form-group",{attrs:{label:s}},[r("b-form-select",{staticStyle:{width:"80%"},attrs:{options:t.productFull.extra[s],"value-field":s},scopedSlots:t._u([{key:"first",fn:function(){return[r("b-form-select-option",{attrs:{value:null,disabled:""}},[t._v("-- Please select an option --")])]},proxy:!0}],null,!0),model:{value:t.selector[s],callback:function(e){t.$set(t.selector,s,e)},expression:"selector[key]"}})],1)],1)],1)})),r("b-list-group-item",[r("label",{attrs:{for:"sb-inline"+t.product.id}},[t._v("Quantity")]),r("b-form-spinbutton",{staticClass:"ml-2",attrs:{id:"sb-inline"+t.product.id,inline:""},model:{value:t.quantity,callback:function(e){t.quantity=e},expression:"quantity"}})],1)],2)],1):t._e()])],1)],1)},o=[],i=(r("b0c0"),r("9911"),r("5530")),n=r("2f62"),a=r("9c03"),c={props:{product:{},isArrival:{default:!1}},data:function(){return{busy:!1,shadow:!1,productFull:{},productLoaded:!1,selector:{},show:!1,cartButtonPressed:null,quantity:1,imgWidth:0}},computed:Object(i["a"])(Object(i["a"])({},Object(n["c"])(["authToken"])),{},{allSelected:function(){if(!this.productLoaded)return!1;for(var t in this.selector)if(this.selector.hasOwnProperty(t)&&null===this.selector[t])return!1;return!0},imgSrc:function(){return this.product.image?this.product.image.link:""},prevPrice:function(){return Math.round(this.product.curPrice/(1-this.product.discount/100))}}),mixins:[a["a"]],methods:Object(i["a"])(Object(i["a"])({},Object(n["b"])(["addToCart"])),{},{loadProduct:function(){var t=this;if(!this.productLoaded){var e=this.product.id;this.loader("/product",{productID:e},"specs of product-".concat(e)).then((function(e){t.productFull=e.data,t.productLoaded=!0,t.loadSelector()}))}},loadSelector:function(){this.selector={};var t=this.productFull.extra;for(var e in t)t.hasOwnProperty(e)&&Array.isArray(t[e])&&t[e].length>1&&this.$set(this.selector,e,null)},makeOrder:function(){var t=this.productFull.price.sellingPrice;return{products:[{id:this.productFull.productID,name:this.productFull.name,specifications:this.selector,quantity:this.quantity,image:this.productFull.images[0],curPrice:t,discount:this.productFull.price.discount,vat:this.productFull.price.vat}],subTotal:t*(1+this.productFull.price.vat/100)*this.quantity}},initialHandler:function(t){this.authToken||t?(this.loadProduct(),this.show=!0,this.cartButtonPressed=t):this.$bvModal.show("login-modal")},finalHandler:function(){this.allSelected&&(this.cartButtonPressed?this.addToCart([{productID:this.productFull.productID,specifications:this.selector,quantity:this.quantity,curPrice:this.product.curPrice,discount:this.product.discount,image:this.product.image,name:this.product.name,vat:this.productFull.price.vat}]).then().catch((function(t){console.log(t.response)})):this.$router.push({name:"OrderSubmitDetails",query:{order:this.makeOrder()}}),this.show=!1)},doReset:function(){for(var t in this.quantity=1,this.selector)this.selector.hasOwnProperty(t)&&this.$set(this.selector,t,null)},onHidden:function(){this.$refs.button.focus()},clicking:function(){this.busy=!0,this.$router.push({name:"CertainProduct",params:{id:this.product.id}})}}),mounted:function(){this.imgWidth=this.$refs.img.clientWidth}},u=c,l=(r("ba76"),r("2877")),d=Object(l["a"])(u,s,o,!1,null,"5d4cbc4e",null);e["a"]=d.exports},7252:function(t,e,r){"use strict";var s=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"shadow mb-2 text-center"},[r("span",{staticClass:"mx-2"},[t._v("Sort by:")]),r("b-dropdown",{staticClass:"col-2",attrs:{variant:"Light",text:t.sortOptions[t.sortId].text}},t._l(t.sortOptions,(function(e,s){return r("b-dropdown-item-button",{key:s,on:{click:function(e){return t.setSort(s)}}},[t._v(" "+t._s(e.text)+" ")])})),1)],1)},o=[],i=r("c391"),n={name:"ProductSorter",props:["products"],data:function(){return{sortId:0,sortOptions:[{text:"No Order",sort:null,order:null},{text:"A to Z",sort:"name",order:"asc"},{text:"Z to A",sort:"name",order:"desc"},{text:"Price (Low to High)",sort:"curPrice",order:"asc"},{text:"Price (High to Low)",sort:"curPrice",order:"desc"},{text:"Rating (High to Low)",sort:"rating",order:"desc"},{text:"Rating (Low to High)",sort:"rating",order:"asc"},{text:"Discount (More to Less)",sort:"discount",order:"desc"},{text:"Discount (Less to More)",sort:"discount",order:"asc"}]}},mixins:[i["a"]],methods:{setSort:function(t){if(this.sortId=t,0!==t){var e=this.sortOptions[this.sortId].sort,r=this.sortOptions[this.sortId].order;this.sortArray(this.products,e,r)}}}},a=n,c=r("2877"),u=Object(c["a"])(a,s,o,!1,null,"145617e8",null);e["a"]=u.exports},"857a":function(t,e,r){var s=r("1d80"),o=/"/g;t.exports=function(t,e,r,i){var n=String(s(t)),a="<"+e;return""!==r&&(a+=" "+r+'="'+String(i).replace(o,"&quot;")+'"'),a+">"+n+"</"+e+">"}},"8aa5":function(t,e,r){"use strict";var s=r("6547").charAt;t.exports=function(t,e,r){return e+(r?s(t,e).length:1)}},9911:function(t,e,r){"use strict";var s=r("23e7"),o=r("857a"),i=r("af03");s({target:"String",proto:!0,forced:i("link")},{link:function(t){return o(this,"a","href",t)}})},"9c03":function(t,e,r){"use strict";r("d3b7");var s=r("be3b"),o={methods:{loader:function(t,e,r){return new Promise((function(o,i){s["a"].get(t,{params:e}).then((function(t){console.log("".concat(r," loaded")),console.log(t),o(t)})).catch((function(t){console.log("".concat(r," loading failed")),console.log(t.response)}))}))}}};e["a"]=o},af03:function(t,e,r){var s=r("d039");t.exports=function(t){return s((function(){var e=""[t]('"');return e!==e.toLowerCase()||e.split('"').length>3}))}},ba76:function(t,e,r){"use strict";var s=r("01b8"),o=r.n(s);o.a},c391:function(t,e,r){"use strict";r("ac1f"),r("1276");var s=r("b85c"),o={methods:{sortArray:function(t,e,r){var o=e.split("."),i=function(t){var e,r=t,i=Object(s["a"])(o);try{for(i.s();!(e=i.n()).done;){var n=e.value;r=r[n]}}catch(a){i.e(a)}finally{i.f()}return r};t=t.sort((function(t,e){return i(t)<i(e)?"desc"===r?1:-1:i(t)>i(e)?"desc"===r?-1:1:0}))}}};e["a"]=o}}]);
//# sourceMappingURL=Search.f50812fc.js.map